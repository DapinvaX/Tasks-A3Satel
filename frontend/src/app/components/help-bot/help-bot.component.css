.help-bot { position: fixed; left: 24px; bottom: 24px; z-index: 1000; }
.help-bot .fab { box-shadow: 0 6px 18px rgba(0,0,0,.25); }
.help-bot .panel { width: 320px; max-height: 60vh; display: flex; flex-direction: column; background: var(--card-background); border: 2px solid var(--card-border); border-radius: 12px; padding: 12px; box-shadow: 0 24px 60px rgba(0,0,0,0.4); margin-bottom: 12px; }
.help-bot .panel {
	width: 320px;
	display: flex;
	flex-direction: column;
	background: var(--card-background);
	border: 2px solid var(--card-border);
	border-radius: 12px;
	box-shadow: 0 24px 60px rgba(0,0,0,0.4);
	overflow: hidden;
	/* Estado cerrado por defecto */
	opacity: 0;
	transform: translateY(8px) scale(0.98);
	pointer-events: none;
	max-height: 0;
	padding: 0 12px;
	margin-bottom: 0;
	border-width: 0;
	/* Transiciones unificadas (misma duración y easing al abrir/cerrar) */
	--hb-ease: cubic-bezier(0.22, 1, 0.36, 1);
	--hb-dur: .5s;
	transition: opacity var(--hb-dur) var(--hb-ease),
	          transform var(--hb-dur) var(--hb-ease),
	          max-height var(--hb-dur) var(--hb-ease),
	          padding var(--hb-dur) var(--hb-ease),
	          margin var(--hb-dur) var(--hb-ease),
	          border-width var(--hb-dur) var(--hb-ease);
}

.help-bot.open .panel {
	/* Estado abierto */
	opacity: 1;
	transform: translateY(0) scale(1);
	pointer-events: auto;
	max-height: 60vh;
	padding: 12px;
	margin-bottom: 12px;
	border-width: 2px;
}

/* Transición de la zona de mensajes para mayor suavidad */
.help-bot .messages { transition: opacity .45s cubic-bezier(0.22, 1, 0.36, 1); }
.help-bot .header { display:flex; align-items:center; gap:8px; font-weight:600; color: var(--text-primary); margin-bottom: 8px; }
.help-bot .messages { flex: 1; overflow:auto; display:flex; flex-direction:column; gap:8px; padding: 4px; }
/* Eliminadas reglas previas basadas en aria-hidden; ahora se usa la clase .open del contenedor */
.help-bot .msg { display:flex; }
.help-bot .msg.user { justify-content:flex-end; }
.help-bot .bubble { max-width: 85%; padding:8px 12px; border-radius:12px; line-height:1.4; white-space:pre-line; will-change: transform, opacity; }
.help-bot .msg.user .bubble { background:#1976d2; color:#fff; }
[data-theme="dark"] .help-bot .msg.user .bubble { background:#90caf9; color:#1a1a1a; }
.help-bot .msg.bot .bubble { background: rgba(0,0,0,.06); color: var(--text-primary); border: 1px solid rgba(0,0,0,.08); }
[data-theme="dark"] .help-bot .msg.bot .bubble { background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,.1); }
.help-bot .msg.bot .bubble:not(.thinking) { animation: bubbleInLeft .5s cubic-bezier(0.22, 1, 0.36, 1); }
.help-bot .msg.user .bubble { animation: bubbleInRight .5s cubic-bezier(0.22, 1, 0.36, 1); }

@keyframes bubbleInLeft {
	0% { opacity: 0; transform: translateY(6px) translateX(-8px) scale(0.98); }
	100% { opacity: 1; transform: translateY(0) translateX(0) scale(1); }
}

@keyframes bubbleInRight {
	0% { opacity: 0; transform: translateY(6px) translateX(8px) scale(0.98); }
	100% { opacity: 1; transform: translateY(0) translateX(0) scale(1); }
}

/* Respeto a usuarios con reducción de movimiento */
@media (prefers-reduced-motion: reduce) {
	.help-bot .msg.bot .bubble,
	.help-bot .msg.user .bubble {
		animation: none !important;
	}
}
.help-bot .msg.bot .bubble.thinking {
	position: relative;
	min-width: 44px;
	height: 18px;
}
.help-bot .msg.bot .bubble.thinking::before,
.help-bot .msg.bot .bubble.thinking::after,
.help-bot .msg.bot .bubble.thinking span {
	content: '';
	display: inline-block;
	width: 6px; height: 6px; border-radius: 50%;
	background: var(--text-primary);
	opacity: .6;
	margin: 0 3px;
	animation: botDots 1.2s infinite ease-in-out;
}
.help-bot .msg.bot .bubble.thinking::before { animation-delay: 0s; }
.help-bot .msg.bot .bubble.thinking span { animation-delay: .2s; }
.help-bot .msg.bot .bubble.thinking::after { animation-delay: .4s; }
@keyframes botDots {
	0%, 80%, 100% { transform: translateY(0); opacity: .5; }
	40% { transform: translateY(-3px); opacity: 1; }
}
.help-bot .composer { display:flex; gap:8px; align-items:center; margin-top:8px; }
.help-bot .composer input { flex:1; padding:10px 12px; border-radius:8px; border:1px solid var(--card-border); outline:none; background: transparent; color: var(--text-primary); }
.help-bot .composer button { align-self:stretch; }
.help-bot .suggestions { display:flex; flex-wrap:wrap; gap:6px; margin-top:6px; }

